<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=0.86,maximum-scale=3,minimum-scale=0.86">
<meta name="generator" content="Docusaurus v2.0.0-alpha.63">
<title data-react-helmet="true">从 React 历史的长河里聊虚拟 DOM 及其价值 | 你好，我是邓登举</title><meta data-react-helmet="true" property="og:title" content="从 React 历史的长河里聊虚拟 DOM 及其价值 | 你好，我是邓登举"><meta data-react-helmet="true" name="description" content="最近，很多面试里都有「如何理解虚拟 DOM」这个题，大部分人想当然就会说为了提高性能，其实这个问题应该没有想象中那么好答。"><meta data-react-helmet="true" property="og:description" content="最近，很多面试里都有「如何理解虚拟 DOM」这个题，大部分人想当然就会说为了提高性能，其实这个问题应该没有想象中那么好答。"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/logo.svg"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Turkyden/Turkyden.github.io@gh-pages/styles.cf286a6a.css">
<link rel="preload" href="https://cdn.jsdelivr.net/gh/Turkyden/Turkyden.github.io@gh-pages/styles.73c9b181.js" as="script">
<link rel="preload" href="https://cdn.jsdelivr.net/gh/Turkyden/Turkyden.github.io@gh-pages/runtime~main.50569c64.js" as="script">
<link rel="preload" href="https://cdn.jsdelivr.net/gh/Turkyden/Turkyden.github.io@gh-pages/main.86d2f22b.js" as="script">
<link rel="preload" href="https://cdn.jsdelivr.net/gh/Turkyden/Turkyden.github.io@gh-pages/1.91b05bf6.js" as="script">
<link rel="preload" href="https://cdn.jsdelivr.net/gh/Turkyden/Turkyden.github.io@gh-pages/2.5d8e3081.js" as="script">
<link rel="preload" href="https://cdn.jsdelivr.net/gh/Turkyden/Turkyden.github.io@gh-pages/3.f9fbe2cf.js" as="script">
<link rel="preload" href="https://cdn.jsdelivr.net/gh/Turkyden/Turkyden.github.io@gh-pages/ccc49370.973841d9.js" as="script">
<link rel="preload" href="https://cdn.jsdelivr.net/gh/Turkyden/Turkyden.github.io@gh-pages/37d2b21e.f40f9006.js" as="script">
</head>
<body itemscope="" itemtype="http://schema.org/Organization">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Hello Turkyden"><strong class="navbar__title">Turkyden</strong></a><a class="navbar__item navbar__link" href="/docs">进阶</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">专栏</a><a class="navbar__item navbar__link" href="/books">书籍</a><a class="navbar__item navbar__link" href="/motto">箴言</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Turkyden" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Hello Turkyden"><strong class="navbar__title">Turkyden</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs">进阶</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog">专栏</a></li><li class="menu__list-item"><a class="menu__link" href="/books">书籍</a></li><li class="menu__list-item"><a class="menu__link" href="/motto">箴言</a></li><li class="menu__list-item"><a href="https://github.com/Turkyden" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--8 col--offset-2"><article><header><h1 class="margin-bottom--sm blogPostTitle_1mse">从 React 历史的长河里聊虚拟 DOM 及其价值</h1><div class="margin-vert--md"><time datetime="2020-09-28T00:00:00.000Z" class="blogPostDate_3bQP">September 28, 2020  · 4 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/Turkyden" target="_blank" rel="noreferrer noopener"><img src="http://wx.qlogo.cn/mmhead/Q3auHgzwzM4mFCV4uWh1meO1YY2iab8FUDcEoZWfRT3WOX18djUbszA/0" alt="桃翁"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/Turkyden" target="_blank" rel="noreferrer noopener">桃翁</a></h4><small class="avatar__subtitle">前端桃园</small></div></div></header><section class="markdown"><p>最近，很多面试里都有「如何理解虚拟 DOM」这个题，大部分人想当然就会说为了提高性能，其实这个问题应该没有想象中那么好答。</p><p>因为很多人没有真正理解虚拟 DOM 它的价值所在，我这篇从虚拟 DOM 的诞生过程来引出它的价值以及历史地位，帮助你深入的理解它。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="什么是虚拟-dom"></a>什么是虚拟 DOM<a aria-hidden="true" tabindex="-1" class="hash-link" href="#什么是虚拟-dom" title="Direct link to heading">#</a></h2><blockquote><p>本质上是 JavaScript 对象，这个对象就是更加轻量级的对 DOM 的描述。</p></blockquote><p>对，就是这么简单！</p><p>就是一个复杂一点的对象而已，没什么好说的，重点是为什么要有这个东西，以及有了这个描述有什么好处才是我们今天要介绍的内容。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="为什么要有虚拟-dom"></a>为什么要有虚拟 DOM<a aria-hidden="true" tabindex="-1" class="hash-link" href="#为什么要有虚拟-dom" title="Direct link to heading">#</a></h2><p>再谈为什么要用虚拟 DOM 之前，先来聊一聊 React 是怎么诞生的，毕竟在了解历史背景，再去思考他的诞生，就知道是必然会出现的。</p><p>再查了很多关于 React 的历史相关的文章，这篇文章我感觉比较值得令我信服：React 是怎样炼成的。</p><p>众所周知，Facebook 是 PHP 大户，所以 React 最开始的灵感就来至于 PHP。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="字符串拼接时代---2004"></a>字符串拼接时代 - 2004<a aria-hidden="true" tabindex="-1" class="hash-link" href="#字符串拼接时代---2004" title="Direct link to heading">#</a></h3><p>在 2004 年这个时候，大家都还在用 PHP 的字符串拼接来开发网站：</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-php codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token variable" style="color:#d7deea">$str</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token single-quoted-string string" style="color:#8dc891">&#x27;&lt;ul&gt;&#x27;</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">foreach</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$talks</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">as</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$talk</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token variable" style="color:#d7deea">$str</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">+</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token single-quoted-string string" style="color:#8dc891">&#x27;&lt;li&gt;&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$talk</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token property" style="color:#5a9bcf">name</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"> </span><span class="token single-quoted-string string" style="color:#8dc891">&#x27;&lt;/li&gt;&#x27;</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token variable" style="color:#d7deea">$str</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">+</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token single-quoted-string string" style="color:#8dc891">&#x27;&lt;/ul&gt;&#x27;</span><span class="token punctuation" style="color:#8dc891">;</span></div></div></div></div></div><p>这种方式代码写出来不好看不说，还容易造成 XSS 等安全问题。</p><p>应对方法是对用户的任何输入都进行转义（Escape）。但是如果对字符串进行多次转义，那么反转义的次数也必须是相同的，否则会无法得到原内容。如果又不小心把 HTML 标签（Markup）给转义了，那么 HTML 标签会直接显示给用户，从而导致很差的用户体验。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="xhp-时代---2010"></a>XHP 时代 - 2010<a aria-hidden="true" tabindex="-1" class="hash-link" href="#xhp-时代---2010" title="Direct link to heading">#</a></h3><p>到了 2010 年，为了更加高效的编码，同时也避免转义 HTML 标签的错误，Facebook 开发了 XHP 。XHP 是对 PHP 的语法拓展，它允许开发者直接在 PHP 中使用 HTML 标签，而不再使用字符串。</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-php codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token variable" style="color:#d7deea">$content</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">ul </span><span class="token operator" style="color:#d7deea">/</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">foreach</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$talks</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">as</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$talk</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token variable" style="color:#d7deea">$content</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token function" style="color:#79b6f2">appendChild</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">li</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token variable" style="color:#d7deea">$talk</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token property" style="color:#5a9bcf">name</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">li</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span></div></div></div></div></div><p>这样的话，所有的 HTML 标签都使用不同于 PHP 的语法，我们可以轻易的分辨哪些需要转义哪些不需要转义。</p><p>不久的后来，Facebook 的工程师又发现他们还可以创建自定义标签，而且通过组合自定义标签有助于构建大型应用。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="jsx---2013"></a>JSX - 2013<a aria-hidden="true" tabindex="-1" class="hash-link" href="#jsx---2013" title="Direct link to heading">#</a></h3><p>到了 2013 年，前端工程师 Jordan Walke 向他的经理提出了一个大胆的想法：把 XHP 的拓展功能迁移到 JS 中。首要任务是需要一个拓展来让 JS 支持 XML 语法，该拓展称为 JSX。因为当时由于 Node.js 在 Facebook 已经有很多实践，所以很快就实现了 JSX。</p><p>可以猜想一下为什么要迁移到 js 中，我猜想应该是前后端分离导致的。</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-jsx codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> content </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag class-name" style="color:#FAC863">TalkList</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> talks</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">map</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token parameter">talk</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag class-name" style="color:#FAC863">Talk</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">talk</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#8dc891">=</span><span class="token tag script language-javascript punctuation" style="color:#8dc891">{</span><span class="token tag script language-javascript" style="color:#fc929e">talk</span><span class="token tag script language-javascript punctuation" style="color:#8dc891">}</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag punctuation" style="color:#8dc891">/&gt;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag class-name" style="color:#FAC863">TalkList</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="react"></a>React<a aria-hidden="true" tabindex="-1" class="hash-link" href="#react" title="Direct link to heading">#</a></h3><p>在这个时候，就有另外一个很棘手的问题，那就是在进行更新的时候，需要去操作 DOM，传统 DOM API 细节太多，操作复杂，所以就很容易出现 Bug，而且代码难以维护。</p><p>然后就想到了 PHP 时代的更新机制，每当有数据改变时，只需要跳到一个由 PHP 全新渲染的新页面即可。</p><p>从开发者的角度来看的话，这种方式开发应用是非常简单的，因为它不需要担心变更，且界面上用户数据改变时所有内容都是同步的。</p><p>为此 React 提出了一个新的思想，即<strong>始终整体“刷新”页面</strong></p><p><strong>当发生前后状态变化时，React 会自动更新 UI</strong>，让我们从复杂的 UI 操作中解放出来，使我们只需关于状态以及最终 UI 长什么样。</p><p>下面看看局部刷新和整体刷新的区别。</p><p>局部刷新：</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">// 下面是伪代码</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> ul </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">find</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">ul</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token comment" style="color:#999999">// 先找到 ul</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">ul</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">append</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token template-string template-punctuation string" style="color:#8dc891">`</span><span class="token template-string string" style="color:#8dc891">&lt;li&gt;</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#8dc891">${</span><span class="token template-string interpolation">message3</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#8dc891">}</span><span class="token template-string string" style="color:#8dc891">&lt;/li&gt;</span><span class="token template-string template-punctuation string" style="color:#8dc891">`</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token comment" style="color:#999999">//然后再将message3插到最后</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token comment" style="color:#999999">// 想想如果是不插到最后一个，而是插到中间的第n个</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> ul </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">find</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">ul</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token comment" style="color:#999999">// 先找到 ul</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">var</span><span class="token plain"> preli </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">find</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token function" style="color:#79b6f2">li</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">n</span><span class="token operator" style="color:#d7deea">-</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token comment" style="color:#999999">// 再找到 n-1 的一个 li</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">preli</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">next</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token template-string template-punctuation string" style="color:#8dc891">`</span><span class="token template-string string" style="color:#8dc891">&lt;li&gt;</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#8dc891">${</span><span class="token template-string interpolation">message3</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#8dc891">}</span><span class="token template-string string" style="color:#8dc891">&lt;/li&gt;</span><span class="token template-string template-punctuation string" style="color:#8dc891">`</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token comment" style="color:#999999">// 再插入到 n-1 个的后面</span></div></div></div></div></div><p>整体刷新：</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-jsx codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token constant" style="color:#5a9bcf">UI</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">f</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">messages</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token comment" style="color:#999999">// 整体刷新 3 条消息，只需要调用 f 函数</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token comment" style="color:#999999">// 这个是在初始渲染的时候就定义好的，更新的时候不用去管</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">f</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token parameter">messages</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">ul</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain">messages</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">map</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token parameter">message</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">li</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> message </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">li</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">ul</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span></div></div></div></div></div><p>这个时候，我<strong>只需要关系我的状态（数据是什么），以及 UI 长什么样（布局），不再需要关系操作细节。</strong></p><p>这种方式虽然简单粗暴，但是很明显的缺点，<strong>就是很慢。</strong></p><p>另外还有一个问题就是这样无法包含节点的状态。比如它会失去当前聚焦的元素和光标，以及文本选择和页面滚动位置，这些都是页面的当前状态。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="diff"></a>Diff<a aria-hidden="true" tabindex="-1" class="hash-link" href="#diff" title="Direct link to heading">#</a></h3><p>为了解决上面说的问题，对于没有改变的 DOM 节点，让它保持原样不动，仅仅创建并替换变更过的 DOM 节点。这种方式实现了 DOM 节点<strong>复用</strong>（Reuse）。</p><p>至此，只要能够识别出哪些节点改变了，那么就可以实现对 DOM 的更新。于是问题就转化为<strong>如何比对两个 DOM 的差异。</strong></p><p>说道对比差异，可能很容易想到<strong>版本控制(git)。</strong></p><p>DOM 是树形结构，所以 diff 算法必须是针对树形结构的。目前已知的完整树形结构 diff 算法复杂度为 O(n^3) 。</p><p>完整的 Tree diff 实现算法。[2]</p><p>但是时间复杂度 O(n^3) 太高了，所以 Facebook 工程师考虑到组件的特殊情况，然后将复杂度降低到了 O(n)。</p><p>附：详细的 diff 理解：不可思议的 react diff 。[3]</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="virtual-dom"></a>Virtual DOM<a aria-hidden="true" tabindex="-1" class="hash-link" href="#virtual-dom" title="Direct link to heading">#</a></h3><p>前面说到，React 其实实现了对 DOM 节点的版本控制。</p><p>做过 JS 应用优化的人可能都知道，DOM 是复杂的，对它的操作（尤其是查询和创建）是非常慢非常耗费资源的。看下面的例子，仅创建一个空白的 div，其实例属性就达到 231 个。</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">// Chrome v63</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> div </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#d7deea">document</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">createElement</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;div&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">let</span><span class="token plain"> m </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">let</span><span class="token plain"> k </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> div</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain">  m</span><span class="token operator" style="color:#d7deea">++</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token console class-name" style="color:#FAC863">console</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token method function property-access" style="color:#79b6f2">log</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">m</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token comment" style="color:#999999">// 231</span></div></div></div></div></div><p>对于 DOM 这么多属性，其实大部分属性对于做 Diff 是没有任何用处的，所以如果用更轻量级的 JS 对象来代替复杂的 DOM 节点，然后把对 DOM 的 diff 操作转移到 JS 对象，就可以避免大量对 DOM 的查询操作。这个更轻量级的 JS 对象就称为 Virtual DOM 。</p><p>那么现在的过程就是这样：</p><ol><li>维护一个使用 JS 对象表示的 Virtual DOM，与真实 DOM 一一对应</li><li>对前后两个 Virtual DOM 做 diff ，生成变更（Mutation）</li><li>把变更应用于真实 DOM，生成最新的真实 DOM</li></ol><p>可以看出，因为要把变更应用到真实 DOM 上，所以还是避免不了要直接操作 DOM ，但是 React 的 diff 算法会把 DOM 改动次数降到最低。</p><p>剩下的历史就不谈了，已经引出这篇文章的重点：虚拟 DOM。详细的历史可见：React 是怎样炼成的[4]，文中历史部分内容很多摘抄与此。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="小结"></a>小结<a aria-hidden="true" tabindex="-1" class="hash-link" href="#小结" title="Direct link to heading">#</a></h3><p>传统前端的编程方式是命令式的，直接操纵 DOM，告诉浏览器该怎么干。这样的问题就是，大量的代码被用于操作 DOM 元素，且代码可读性差，可维护性低。</p><p>React 的出现，将命令式变成了声明式，摒弃了直接操作 DOM 的细节，只关注数据的变动，DOM 操作由框架来完成，从而大幅度提升了代码的可读性和可维护性。</p><p>在初期我们可以看到，数据的变动导致整个页面的刷新，这种效率很低，因为可能是局部的数据变化，但是要刷新整个页面，造成了不必要的开销。</p><p>所以就有了 Diff 过程，将数据变动前后的 DOM 结构先进行比较，找出两者的不同处，然后再对不同之处进行更新渲染。</p><p>但是由于整个 DOM 结构又太大，所以采用了更轻量级的对 DOM 的描述—虚拟 DOM。</p><p>不过需要注意的是，虚拟 DOM 和 Diff 算法的出现是为了解决由命令式编程转变为声明式编程、数据驱动后所带来的性能问题的。换句话说，<strong>直接操作 DOM 的性能并不会低于虚拟 DOM 和 Diff 算法，甚至还会优于。</strong></p><p>这么说的原因是因为 Diff 算法的比较过程，比较是为了找出不同从而有的放矢的更新页面。但是比较也是要消耗性能的。而直接操作 DOM 就是有的放矢，我们知道该更新什么不该更新什么，所以不需要有比较的过程。所以直接操作 DOM 效率可能更高。</p><p>React 厉害的地方并不是说它比 DOM 快，而是说不管你数据怎么变化，我都可以以最小的代价来进行更新 DOM。方法就是我在内存里面用新的数据刷新一个虚拟 DOM 树，然后新旧 DOM 进行比较，找出差异，再更新到 DOM 树上。</p><p>框架的意义在于为你掩盖底层的 DOM 操作，让你用更声明式的方式来描述你的目的，从而让你的代码更容易维护。没有任何框架可以比纯手动的优化 DOM 操作更快，因为框架的 DOM 操作层需要应对任何上层 API 可能产生的操作，它的实现必须是普适的。</p><p>如果你想了解更多的虚拟 DOM 与性能的关系，请看下面公众号里面的两篇文章和那个知乎话题，会让你对虚拟 DOM 又更深层次的理解。</p><ul><li>别再说虚拟 DOM 快了，要被打脸的</li><li>深入理解虚拟 DOM，它真的不快</li><li>网上都说操作真实 DOM 慢，但测试结果却比 React 更快，为什么[5]</li></ul><blockquote><p>另外再提一个点，很多人会把 Diff 、数据更新、提升性能等概念绑定起来，但是你想想这个问题：React 由于只触发更新,而不能知道精确变化的数据,所以需要 diff 来找出差异然后 patch 差异队列。Vue 采用数据劫持的手段可以精准拿到变化的数据,为什么还要用虚拟 DOM？</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="虚拟-dom-的作用"></a>虚拟 DOM 的作用<a aria-hidden="true" tabindex="-1" class="hash-link" href="#虚拟-dom-的作用" title="Direct link to heading">#</a></h2><p>要想回答上面那个问题，真的不要仅仅以为虚拟 DOM 或者 React 是来解决性能问题的，好处可还有很多呢。下面我总结了一些虚拟 DOM 好作用。</p><ul><li><strong>Virtual DOM 在牺牲(牺牲很关键)部分性能</strong>的前提下，增加了可维护性，这也是很多框架的通性。</li><li>实现了对 DOM 的集中化操作，在数据改变时先对虚拟 DOM 进行修改，再反映到真实的 DOM 中，用最小的代价来更新 DOM，提高效率(提升效率要想想是跟哪个阶段比提升了效率，别只记住了这一条)。</li><li>打开了函数式 UI 编程的大门。</li><li>可以渲染到 DOM 以外的端，使得框架跨平台，比如 ReactNative，React VR 等。</li><li>可以更好的实现 SSR，同构渲染等。这条其实是跟上面一条差不多的。</li><li>组件的高度抽象化。</li></ul><p>既然虚拟 DOM 有这么多作用，那么上面的问题，Vue 采用虚拟 DOM 的原因是什么呢？</p><blockquote><p>Vue 2.0 引入 vdom 的主要原因是 vdom 把渲染过程抽象化了，从而使得组件的抽象能力也得到提升，并且可以适配 DOM 以外的渲染目标。来自尤大文章：Vue 的理念问题[6]</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="虚拟-dom-的缺点"></a>虚拟 DOM 的缺点<a aria-hidden="true" tabindex="-1" class="hash-link" href="#虚拟-dom-的缺点" title="Direct link to heading">#</a></h2><ul><li>首次渲染大量 DOM 时，由于多了一层虚拟 DOM 的计算，会比 innerHTML 插入慢。</li><li>虚拟 DOM 需要在内存中的维护一份 DOM 的副本(更上面一条其实也差不多，上面一条是从速度上，这条是空间上)。</li><li>如果虚拟 DOM 大量更改，这是合适的。但是单一的，频繁的更新的话，虚拟 DOM 将会花费更多的时间处理计算的工作。所以，如果你有一个 DOM 节点相对较少页面，用虚拟 DOM，它实际上有可能会更慢。但对于大多数单页面应用，这应该都会更快。</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="总结"></a>总结<a aria-hidden="true" tabindex="-1" class="hash-link" href="#总结" title="Direct link to heading">#</a></h2><p>本文在介绍虚拟 DOM 并没有像其他文章一样去解释它的实现以及相关的 Diff 算法，关于 Diff 算法可以看这篇<strong>虚拟 DOM 到底是什么？</strong>文中介绍了很多库的 diff 算法，可见其实 React 的 diff 算法并不算太快。</p><p>而是通过历史来得出他的价值体现，从历史怎么看大牛们是怎么一步一步的去解决问题，从历史中看为什么别人能做出这么伟大的东西，而我们不能？</p><p>每个伟大的产品都会有非常多的背景支持，都是一步一步发展而来的。</p><p>另外洗清了一个错误观念：<strong>很多人认为虚拟 DOM 最大的优势是 diff 算法，减少 JavaScript 操作真实 DOM 的带来的性能消耗。</strong></p><p>虽然这一个虚拟 DOM 带来的一个优势，但并不是全部。虚拟 DOM 最大的优势在于抽象了原本的渲染过程，实现了跨平台的能力，而不仅仅局限于浏览器的 DOM，可以是安卓和 IOS 的原生组件，可以是近期很火热的小程序，也可以是各种 GUI。</p><p>最后希望大家多思考，跟随者浪潮站在浪潮之巅。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="参考链接"></a>参考链接<a aria-hidden="true" tabindex="-1" class="hash-link" href="#参考链接" title="Direct link to heading">#</a></h2><p>虚拟 DOM 为何出现以及性能问题？[7]</p><p>React 是怎样炼成的[8]</p><p>[1] React 是怎样炼成的: <a href="https://segmentfault.com/a/1190000013365426#item-4" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000013365426#item-4</a></p><p>[2] 完整的 Tree diff 实现算法。: <a href="https://grfia.dlsi.ua.es/ml/algorithms/references/editsurvey_bille.pdf" target="_blank" rel="noopener noreferrer">https://grfia.dlsi.ua.es/ml/algorithms/references/editsurvey_bille.pdf</a></p><p>[3] 不可思议的 react diff。: <a href="https://zhuanlan.zhihu.com/p/20346379" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/20346379</a></p><p>[4] React 是怎样炼成的: <a href="https://segmentfault.com/a/1190000013365426" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000013365426</a></p><p>[5] 网上都说操作真实 DOM 慢，但测试结果却比 React 更快，为什么: <a href="https://www.zhihu.com/question/31809713" target="_blank" rel="noopener noreferrer">https://www.zhihu.com/question/31809713</a></p><p>[6] Vue 的理念问题: <a href="https://zhuanlan.zhihu.com/p/23752826" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/23752826</a></p><p>[7] 虚拟 DOM 为何出现以及性能问题？: <a href="https://blog.csdn.net/hjc256/article/details/97135687" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/hjc256/article/details/97135687</a></p><p>[8] React 是怎样炼成的: <a href="https://segmentfault.com/a/1190000013365426" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000013365426</a></p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/react">React</a><a class="margin-horiz--sm" href="/blog/tags/javascript">Javascript</a><a class="margin-horiz--sm" href="/blog/tags/history">History</a></div></footer></article><div><a href="https://github.com/Turkyden/edit/master/blog/blog/2020-09-28-react-virtual-dom-history.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/ecode"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">« ECode 无侵入二开平台</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/low-code-platform"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Low Code Platform 低代码开发 »</div></a></div></nav></div></div><div class="col col--2"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#什么是虚拟-dom" class="table-of-contents__link">什么是虚拟 DOM</a></li><li><a href="#为什么要有虚拟-dom" class="table-of-contents__link">为什么要有虚拟 DOM</a><ul><li><a href="#字符串拼接时代---2004" class="table-of-contents__link">字符串拼接时代 - 2004</a></li><li><a href="#xhp-时代---2010" class="table-of-contents__link">XHP 时代 - 2010</a></li><li><a href="#jsx---2013" class="table-of-contents__link">JSX - 2013</a></li><li><a href="#react" class="table-of-contents__link">React</a></li><li><a href="#diff" class="table-of-contents__link">Diff</a></li><li><a href="#virtual-dom" class="table-of-contents__link">Virtual DOM</a></li><li><a href="#小结" class="table-of-contents__link">小结</a></li></ul></li><li><a href="#虚拟-dom-的作用" class="table-of-contents__link">虚拟 DOM 的作用</a></li><li><a href="#虚拟-dom-的缺点" class="table-of-contents__link">虚拟 DOM 的缺点</a></li><li><a href="#总结" class="table-of-contents__link">总结</a></li><li><a href="#参考链接" class="table-of-contents__link">参考链接</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Resources</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Facebook React</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/">Alibaba Hooks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/">Ant Design</a></li><li class="footer__item"><a href="https://storyset.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Story Set</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">知乎</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">掘金</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dribbble</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/Turkyden" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright © 2021. Created with ❤ by Turkyden.</div></div></div></footer></div>
<script src="https://cdn.jsdelivr.net/gh/Turkyden/Turkyden.github.io@gh-pages/styles.73c9b181.js"></script>
<script src="https://cdn.jsdelivr.net/gh/Turkyden/Turkyden.github.io@gh-pages/runtime~main.50569c64.js"></script>
<script src="https://cdn.jsdelivr.net/gh/Turkyden/Turkyden.github.io@gh-pages/main.86d2f22b.js"></script>
<script src="https://cdn.jsdelivr.net/gh/Turkyden/Turkyden.github.io@gh-pages/1.91b05bf6.js"></script>
<script src="https://cdn.jsdelivr.net/gh/Turkyden/Turkyden.github.io@gh-pages/2.5d8e3081.js"></script>
<script src="https://cdn.jsdelivr.net/gh/Turkyden/Turkyden.github.io@gh-pages/3.f9fbe2cf.js"></script>
<script src="https://cdn.jsdelivr.net/gh/Turkyden/Turkyden.github.io@gh-pages/ccc49370.973841d9.js"></script>
<script src="https://cdn.jsdelivr.net/gh/Turkyden/Turkyden.github.io@gh-pages/37d2b21e.f40f9006.js"></script>
</body>
</html>